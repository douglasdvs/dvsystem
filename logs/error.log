ERROR 2025-07-15 21:49:43,176 log 10356 3552 Internal Server Error: /pedidos/
Traceback (most recent call last):
  File "C:\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Python313\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Python313\Lib\site-packages\django\contrib\auth\decorators.py", line 59, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "D:\dvsystem\pedidos\views.py", line 67, in dashboard
    total_agg = pedidos.aggregate(total=Sum(F('itens__quantidade') * F('preco_unitario')))['total'] or 0
                ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python313\Lib\site-packages\django\db\models\query.py", line 588, in aggregate
    return self.query.chain().get_aggregation(self.db, kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Python313\Lib\site-packages\django\db\models\sql\query.py", line 460, in get_aggregation
    aggregate = aggregate_expr.resolve_expression(
        self, allow_joins=True, reuse=None, summarize=True
    )
  File "C:\Python313\Lib\site-packages\django\db\models\aggregates.py", line 63, in resolve_expression
    c = super().resolve_expression(query, allow_joins, reuse, summarize)
  File "C:\Python313\Lib\site-packages\django\db\models\expressions.py", line 300, in resolve_expression
    expr.resolve_expression(query, allow_joins, reuse, summarize)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python313\Lib\site-packages\django\db\models\expressions.py", line 775, in resolve_expression
    resolved = super().resolve_expression(
        query,
    ...<3 lines>...
        for_save,
    )
  File "C:\Python313\Lib\site-packages\django\db\models\expressions.py", line 300, in resolve_expression
    expr.resolve_expression(query, allow_joins, reuse, summarize)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python313\Lib\site-packages\django\db\models\expressions.py", line 902, in resolve_expression
    return query.resolve_ref(self.name, allow_joins, reuse, summarize)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python313\Lib\site-packages\django\db\models\sql\query.py", line 2046, in resolve_ref
    join_info = self.setup_joins(
        field_list, self.get_meta(), self.get_initial_alias(), can_reuse=reuse
    )
  File "C:\Python313\Lib\site-packages\django\db\models\sql\query.py", line 1897, in setup_joins
    path, final_field, targets, rest = self.names_to_path(
                                       ~~~~~~~~~~~~~~~~~~^
        names[:pivot],
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        fail_on_missing=True,
        ^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Python313\Lib\site-packages\django\db\models\sql\query.py", line 1802, in names_to_path
    raise FieldError(
    ...<2 lines>...
    )
django.core.exceptions.FieldError: Cannot resolve keyword 'preco_unitario' into field. Choices are: anexos, arquivo_arte, arquivo_arte_aprovada, arte_aprovada, atualizado_em, atualizado_por, atualizado_por_id, cliente, cliente_id, codigo, codigo_rastreio, criado_em, criado_por, criado_por_id, cupom, cupom_id, data, data_arte_aprovada, data_entrega, data_entrega_prevista, data_entrega_realizada, data_envio, data_restante_pago, data_sinal_pago, desconto, forma_envio, forma_pagamento, historico, id, itens, observacoes, observacoes_arte, observacoes_internas, prioridade, receita, restante_pago, sinal_pago, status, taxa_entrega, usuario, usuario_id, valor_recebido, valor_restante, valor_sinal, vendedor, vendedor_id
ERROR 2025-07-15 21:49:43,665 basehttp 10356 3552 "GET /pedidos/ HTTP/1.1" 500 145
ERROR 2025-07-15 21:49:48,376 log 10356 3552 Internal Server Error: /pedidos/
Traceback (most recent call last):
  File "C:\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Python313\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Python313\Lib\site-packages\django\contrib\auth\decorators.py", line 59, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "D:\dvsystem\pedidos\views.py", line 67, in dashboard
    total_agg = pedidos.aggregate(total=Sum(F('itens__quantidade') * F('preco_unitario')))['total'] or 0
                ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python313\Lib\site-packages\django\db\models\query.py", line 588, in aggregate
    return self.query.chain().get_aggregation(self.db, kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Python313\Lib\site-packages\django\db\models\sql\query.py", line 460, in get_aggregation
    aggregate = aggregate_expr.resolve_expression(
        self, allow_joins=True, reuse=None, summarize=True
    )
  File "C:\Python313\Lib\site-packages\django\db\models\aggregates.py", line 63, in resolve_expression
    c = super().resolve_expression(query, allow_joins, reuse, summarize)
  File "C:\Python313\Lib\site-packages\django\db\models\expressions.py", line 300, in resolve_expression
    expr.resolve_expression(query, allow_joins, reuse, summarize)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python313\Lib\site-packages\django\db\models\expressions.py", line 775, in resolve_expression
    resolved = super().resolve_expression(
        query,
    ...<3 lines>...
        for_save,
    )
  File "C:\Python313\Lib\site-packages\django\db\models\expressions.py", line 300, in resolve_expression
    expr.resolve_expression(query, allow_joins, reuse, summarize)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python313\Lib\site-packages\django\db\models\expressions.py", line 902, in resolve_expression
    return query.resolve_ref(self.name, allow_joins, reuse, summarize)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python313\Lib\site-packages\django\db\models\sql\query.py", line 2046, in resolve_ref
    join_info = self.setup_joins(
        field_list, self.get_meta(), self.get_initial_alias(), can_reuse=reuse
    )
  File "C:\Python313\Lib\site-packages\django\db\models\sql\query.py", line 1897, in setup_joins
    path, final_field, targets, rest = self.names_to_path(
                                       ~~~~~~~~~~~~~~~~~~^
        names[:pivot],
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        fail_on_missing=True,
        ^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Python313\Lib\site-packages\django\db\models\sql\query.py", line 1802, in names_to_path
    raise FieldError(
    ...<2 lines>...
    )
django.core.exceptions.FieldError: Cannot resolve keyword 'preco_unitario' into field. Choices are: anexos, arquivo_arte, arquivo_arte_aprovada, arte_aprovada, atualizado_em, atualizado_por, atualizado_por_id, cliente, cliente_id, codigo, codigo_rastreio, criado_em, criado_por, criado_por_id, cupom, cupom_id, data, data_arte_aprovada, data_entrega, data_entrega_prevista, data_entrega_realizada, data_envio, data_restante_pago, data_sinal_pago, desconto, forma_envio, forma_pagamento, historico, id, itens, observacoes, observacoes_arte, observacoes_internas, prioridade, receita, restante_pago, sinal_pago, status, taxa_entrega, usuario, usuario_id, valor_recebido, valor_restante, valor_sinal, vendedor, vendedor_id
ERROR 2025-07-15 21:49:48,380 basehttp 10356 3552 "GET /pedidos/ HTTP/1.1" 500 145
ERROR 2025-07-15 21:50:46,684 log 23368 25232 Internal Server Error: /pedidos/listar/
Traceback (most recent call last):
  File "C:\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Python313\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Python313\Lib\site-packages\django\contrib\auth\decorators.py", line 59, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "D:\dvsystem\pedidos\views.py", line 195, in listar
    total_agg = pedidos.aggregate(total=Sum(F('itens__quantidade') * F('preco_unitario')))['total'] or 0
                ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python313\Lib\site-packages\django\db\models\query.py", line 588, in aggregate
    return self.query.chain().get_aggregation(self.db, kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Python313\Lib\site-packages\django\db\models\sql\query.py", line 460, in get_aggregation
    aggregate = aggregate_expr.resolve_expression(
        self, allow_joins=True, reuse=None, summarize=True
    )
  File "C:\Python313\Lib\site-packages\django\db\models\aggregates.py", line 63, in resolve_expression
    c = super().resolve_expression(query, allow_joins, reuse, summarize)
  File "C:\Python313\Lib\site-packages\django\db\models\expressions.py", line 300, in resolve_expression
    expr.resolve_expression(query, allow_joins, reuse, summarize)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python313\Lib\site-packages\django\db\models\expressions.py", line 775, in resolve_expression
    resolved = super().resolve_expression(
        query,
    ...<3 lines>...
        for_save,
    )
  File "C:\Python313\Lib\site-packages\django\db\models\expressions.py", line 300, in resolve_expression
    expr.resolve_expression(query, allow_joins, reuse, summarize)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python313\Lib\site-packages\django\db\models\expressions.py", line 902, in resolve_expression
    return query.resolve_ref(self.name, allow_joins, reuse, summarize)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python313\Lib\site-packages\django\db\models\sql\query.py", line 2046, in resolve_ref
    join_info = self.setup_joins(
        field_list, self.get_meta(), self.get_initial_alias(), can_reuse=reuse
    )
  File "C:\Python313\Lib\site-packages\django\db\models\sql\query.py", line 1897, in setup_joins
    path, final_field, targets, rest = self.names_to_path(
                                       ~~~~~~~~~~~~~~~~~~^
        names[:pivot],
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        fail_on_missing=True,
        ^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Python313\Lib\site-packages\django\db\models\sql\query.py", line 1802, in names_to_path
    raise FieldError(
    ...<2 lines>...
    )
django.core.exceptions.FieldError: Cannot resolve keyword 'preco_unitario' into field. Choices are: anexos, arquivo_arte, arquivo_arte_aprovada, arte_aprovada, atualizado_em, atualizado_por, atualizado_por_id, cliente, cliente_id, codigo, codigo_rastreio, criado_em, criado_por, criado_por_id, cupom, cupom_id, data, data_arte_aprovada, data_entrega, data_entrega_prevista, data_entrega_realizada, data_envio, data_restante_pago, data_sinal_pago, desconto, forma_envio, forma_pagamento, historico, id, itens, observacoes, observacoes_arte, observacoes_internas, prioridade, receita, restante_pago, sinal_pago, status, taxa_entrega, usuario, usuario_id, valor_recebido, valor_restante, valor_sinal, vendedor, vendedor_id
ERROR 2025-07-15 21:50:46,692 basehttp 23368 25232 "GET /pedidos/listar/ HTTP/1.1" 500 145
ERROR 2025-07-15 22:00:18,294 log 5272 20700 Internal Server Error: /relatorios/margem-lucro/
Traceback (most recent call last):
  File "C:\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Python313\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\dvsystem\relatorios\views.py", line 392, in relatorio_margem_lucro
    .values(produto=F("produto__descricao"))
     ~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python313\Lib\site-packages\django\db\models\query.py", line 1365, in values
    clone = self._values(*fields, **expressions)
  File "C:\Python313\Lib\site-packages\django\db\models\query.py", line 1358, in _values
    clone = clone.annotate(**expressions)
  File "C:\Python313\Lib\site-packages\django\db\models\query.py", line 1635, in annotate
    return self._annotate(args, kwargs, select=True)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python313\Lib\site-packages\django\db\models\query.py", line 1680, in _annotate
    raise ValueError(
    ...<2 lines>...
    )
ValueError: The annotation 'produto' conflicts with a field on the model.
ERROR 2025-07-15 22:00:18,299 basehttp 5272 20700 "GET /relatorios/margem-lucro/ HTTP/1.1" 500 145
ERROR 2025-07-15 22:00:19,685 log 5272 20700 Internal Server Error: /relatorios/margem-lucro/
Traceback (most recent call last):
  File "C:\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Python313\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\dvsystem\relatorios\views.py", line 392, in relatorio_margem_lucro
    .values(produto=F("produto__descricao"))
     ~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python313\Lib\site-packages\django\db\models\query.py", line 1365, in values
    clone = self._values(*fields, **expressions)
  File "C:\Python313\Lib\site-packages\django\db\models\query.py", line 1358, in _values
    clone = clone.annotate(**expressions)
  File "C:\Python313\Lib\site-packages\django\db\models\query.py", line 1635, in annotate
    return self._annotate(args, kwargs, select=True)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python313\Lib\site-packages\django\db\models\query.py", line 1680, in _annotate
    raise ValueError(
    ...<2 lines>...
    )
ValueError: The annotation 'produto' conflicts with a field on the model.
ERROR 2025-07-15 22:00:19,688 basehttp 5272 20700 "GET /relatorios/margem-lucro/ HTTP/1.1" 500 145
ERROR 2025-07-15 22:02:08,789 log 3948 22944 Internal Server Error: /relatorios/
Traceback (most recent call last):
  File "C:\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Python313\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\dvsystem\relatorios\views.py", line 24, in index
    total_vendido = Pedido.objects.aggregate(total=Sum(F('itens__quantidade') * F('preco_unitario')))['total'] or 0
                    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python313\Lib\site-packages\django\db\models\manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Python313\Lib\site-packages\django\db\models\query.py", line 588, in aggregate
    return self.query.chain().get_aggregation(self.db, kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Python313\Lib\site-packages\django\db\models\sql\query.py", line 460, in get_aggregation
    aggregate = aggregate_expr.resolve_expression(
        self, allow_joins=True, reuse=None, summarize=True
    )
  File "C:\Python313\Lib\site-packages\django\db\models\aggregates.py", line 63, in resolve_expression
    c = super().resolve_expression(query, allow_joins, reuse, summarize)
  File "C:\Python313\Lib\site-packages\django\db\models\expressions.py", line 300, in resolve_expression
    expr.resolve_expression(query, allow_joins, reuse, summarize)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python313\Lib\site-packages\django\db\models\expressions.py", line 775, in resolve_expression
    resolved = super().resolve_expression(
        query,
    ...<3 lines>...
        for_save,
    )
  File "C:\Python313\Lib\site-packages\django\db\models\expressions.py", line 300, in resolve_expression
    expr.resolve_expression(query, allow_joins, reuse, summarize)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python313\Lib\site-packages\django\db\models\expressions.py", line 902, in resolve_expression
    return query.resolve_ref(self.name, allow_joins, reuse, summarize)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python313\Lib\site-packages\django\db\models\sql\query.py", line 2046, in resolve_ref
    join_info = self.setup_joins(
        field_list, self.get_meta(), self.get_initial_alias(), can_reuse=reuse
    )
  File "C:\Python313\Lib\site-packages\django\db\models\sql\query.py", line 1897, in setup_joins
    path, final_field, targets, rest = self.names_to_path(
                                       ~~~~~~~~~~~~~~~~~~^
        names[:pivot],
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        fail_on_missing=True,
        ^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Python313\Lib\site-packages\django\db\models\sql\query.py", line 1802, in names_to_path
    raise FieldError(
    ...<2 lines>...
    )
django.core.exceptions.FieldError: Cannot resolve keyword 'preco_unitario' into field. Choices are: anexos, arquivo_arte, arquivo_arte_aprovada, arte_aprovada, atualizado_em, atualizado_por, atualizado_por_id, cliente, cliente_id, codigo, codigo_rastreio, criado_em, criado_por, criado_por_id, cupom, cupom_id, data, data_arte_aprovada, data_entrega, data_entrega_prevista, data_entrega_realizada, data_envio, data_restante_pago, data_sinal_pago, desconto, forma_envio, forma_pagamento, historico, id, itens, observacoes, observacoes_arte, observacoes_internas, prioridade, receita, restante_pago, sinal_pago, status, taxa_entrega, usuario, usuario_id, valor_recebido, valor_restante, valor_sinal, vendedor, vendedor_id
ERROR 2025-07-15 22:02:08,796 basehttp 3948 22944 "GET /relatorios/ HTTP/1.1" 500 145
